<!DOCTYPE html>
<html lang="en">
  <script>
    let promesa = new Promise(function (resolve, reject) {
      //var promesaComplida = true
      var promesaComplida = true;

      if (promesaComplida) {
        resolve('{"id":125, "dni": "12345678T", "name": "Maria Johnson"}')
      } else {
        reject('{"codi":404}')
      }
    })

    // console.log("Before Promise\n");

    // Retornar la promesa
    promesa
      .then(function (message) {
        console.info("Aconseguida la informació de l'usuari " + JSON.parse(message).name)
      })
      .catch(function (error) {
        //En cas d'error
        console.info("S'ha produït l'error " + JSON.parse(error).codi)
      })

    //    console.log("After Promise\n");

    console.log(promesa)
  </script>
</html>
